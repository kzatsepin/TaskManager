# Техническое задание (ТЗ) на разработку системы управления задачами

## 1. Введение
Система управления задачами предназначена для создания, отслеживания и управления задачами пользователей. Она включает в себя функционал регистрации, аутентификации, управления пользователями, задачами, комментариями и уведомлениями.

## 2. Функциональные требования
### 2.1. Пользователи
**Регистрация пользователя**
- Пользователь должен указать `username`, `email` и `пароль`.
- Пароль должен содержать не менее 8 символов, включая буквы и цифры.
- Email должен быть уникальным и проверяться регулярным выражением.
- Данные пользователя хранятся в базе данных с хешированием пароля.
- В случае успеха возвращается `id`, `username` и `email`.
- В случае ошибки возвращается соответствующее сообщение об ошибке.

**Аутентификация пользователя**
- Пользователь должен авторизоваться по `email` и `паролю`.
- В случае успеха сервер возвращает JWT-токен с `access_token` и `refresh_token`.
- JWT-токен должен иметь срок действия (например, `24 часа`).
- Обновление токена (`refresh_token`) возможно без повторного входа.

**Управление пользователями**
- Пользователь может обновлять свои данные (`username`, `email`, `пароль`).
- Пользователь может удалить свой аккаунт.
- Администратор может заблокировать/разблокировать пользователя.

### 2.2. Задачи
**Создание задачи**
- Поля: `title` (обязательно), `description` (опционально), `priority` (low, medium, high), `due_date` (дата в формате `YYYY-MM-DD`).
- Проверка, что `due_date` не является прошедшей датой.
- Проверка уникальности `title` для текущего пользователя.
- При успешном создании возвращается `id` задачи и её данные.

**Редактирование задачи**
- Пользователь может изменить `title`, `description`, `priority`, `due_date`, `status`.
- Статусы: `pending`, `in_progress`, `completed`, `cancelled`.
- `due_date` не может быть изменён на прошедшую дату.

**Удаление задачи**
- Пользователь может удалить только свои задачи.
- Администратор может удалять любые задачи.

**Получение списка задач**
- Возможность фильтрации по `status`, `priority`, `due_date`.
- Возможность сортировки по `due_date`, `priority`.

### 2.3. Комментарии к задачам
**Добавление комментариев**
- Пользователь может оставить комментарий к своей или доступной ему задаче.
- Ограничение на длину комментария (`макс. 500 символов`).

**Редактирование и удаление комментариев**
- Пользователь может редактировать и удалять только свои комментарии.
- Администратор может удалять любые комментарии.

### 2.4. Уведомления
**Типы уведомлений**
- Уведомление о новой задаче.
- Уведомление о завершении задачи.
- Уведомление о новых комментариях.

**Получение уведомлений**
- Пользователь может просматривать список уведомлений.
- Уведомление можно пометить как прочитанное.

## 3. Нефункциональные требования
### 3.1. Требования к безопасности
- Пароли пользователей должны храниться в виде хеша (`bcrypt`).
- JWT-токены должны быть защищены и передаваться только через `HTTPS`.
- Валидация входных данных должна предотвращать SQL-инъекции и XSS-атаки.

### 3.2. Технические ограничения
- Бэкенд: `Golang`.
- Фреймворк: `Gin`.
- База данных: `PostgreSQL`.
- Хранение файлов: `MinIO`.
- Контейнеризация: `Docker`.

## 4. API-эндпоинты
### 4.1. Пользователи
- `POST /api/users` – регистрация.
- `POST /api/auth/login` – вход.
- `POST /api/auth/logout` – выход.
- `GET /api/users/{id}` – получение данных о пользователе.
- `PUT /api/users/{id}` – обновление данных пользователя.
- `DELETE /api/users/{id}` – удаление пользователя.

### 4.2. Задачи
- `POST /api/tasks` – создание задачи.
- `GET /api/tasks` – получение списка задач.
- `GET /api/tasks/{id}` – получение конкретной задачи.
- `PUT /api/tasks/{id}` – обновление задачи.
- `DELETE /api/tasks/{id}` – удаление задачи.

### 4.3. Комментарии
- `POST /api/tasks/{task_id}/comments` – добавление комментария.
- `DELETE /api/comments/{id}` – удаление комментария.

### 4.4. Уведомления
- `GET /api/notifications` – получение уведомлений.
- `PATCH /api/notifications/{id}` – отметка уведомления как прочитанного.

## 5. Развёртывание и CI/CD
- Разработка ведётся в репозитории `GitHub/GitLab`.
- Используется `Docker Compose` для локального запуска.
- Деплой осуществляется на `AWS/GCP` с автоматическим CI/CD (GitHub Actions/GitLab CI).

## 6. Заключение
Данный документ описывает функциональные и технические требования к системе управления задачами. Он служит основой для разработки, тестирования и развертывания проекта.


## 3. Администрирование
- Администратор может удалять пользователей.
- Администратор может удалять задачи.
- Администратор может удалять комментарии.
